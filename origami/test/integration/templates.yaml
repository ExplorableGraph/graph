name: Template integration tests
tests:
  - title: One template can reference another in local scope via @local
    fixture:
      actual.ori: includeGreet.orit("Bob")
      includeGreet.orit: <h1>{{ @local/greet.orit(_) }}</h1>
      greet.orit: Hello, {{ _ }}!
    expected: <h1>Hello, Bob!</h1>

  - title: Result of one template can be passed to another
    fixture:
      actual.ori: index.orit("Hello, world!")
      page.orit: |
        <html>
          <body>
            {{ _ }}
          </body>
        </html>
      index.orit: "{{ page.orit(_) }}"
    expected: |
      <html>
        <body>
          Hello, world!
        </body>
      </html>

  - title: Template can invoke a @map
    fixture:
      actual.ori: template.orit()
      names:
        - Alice
        - Bob
        - Carol
      template.orit: |
        {{ @map/values(names, =`Hello, {{ _ }}!
        `) }}
    expected: |
      Hello, Alice!
      Hello, Bob!
      Hello, Carol!

  - title: Template can reference input front matter
    fixture:
      actual.ori: template.orit(person)
      template.orit: |
        <h1>{{ _/name }}</h1>
      person:
        name: Carol
    expected: |
      <h1>Carol</h1>
